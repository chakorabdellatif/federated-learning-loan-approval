# kafka.yml for JMX Exporter
---
# Convert metric names to lowercase
lowercaseOutputName: true

# Default rules for scraping
rules:
  # Kafka Broker Metrics
  - pattern: "kafka.server<type=(.+), name=(.+)><>Value"
    name: "kafka_server_$1_$2"
    type: GAUGE

  # Kafka Controller Metrics
  - pattern: "kafka.controller<type=(.+), name=(.+)><>Value"
    name: "kafka_controller_$1_$2"
    type: GAUGE

  # Kafka Replica Metrics
  - pattern: "kafka.log<type=(.+), name=(.+)><>Value"
    name: "kafka_log_$1_$2"
    type: GAUGE

  # Kafka Consumer Metrics
  - pattern: "kafka.consumer<type=(.+), name=(.+)><>Value"
    name: "kafka_consumer_$1_$2"
    type: GAUGE

  # JVM Memory Metrics
  - pattern: "java.lang<type=Memory, name=(.+)><>Value"
    name: "jvm_memory_$1"
    type: GAUGE

  # JVM Garbage Collector Metrics
  - pattern: "java.lang<type=GarbageCollector, name=(.+)><>CollectionCount"
    name: "jvm_gc_$1_count"
    type: COUNTER
  - pattern: "java.lang<type=GarbageCollector, name=(.+)><>CollectionTime"
    name: "jvm_gc_$1_time_ms"
    type: COUNTER

  # JVM Thread Metrics
  - pattern: "java.lang<type=Threading, name=(.+)><>Value"
    name: "jvm_threads_$1"
    type: GAUGE
